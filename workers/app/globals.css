@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }
  
  body {
    @apply bg-obsidian text-sand antialiased;
    font-family: 'Merriweather', Georgia, serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overscroll-behavior-y: contain;
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-heading;
  }
  
  /* Noise texture overlay */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.03;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: overlay;
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-slate;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-relic-gold rounded;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-hologram-cyan;
  }
  
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.001ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.001ms !important;
    }
  }
}

@layer components {
  /* Primary action button */
  .btn-rune {
    @apply px-6 py-3 bg-relic-gold text-obsidian font-mono uppercase tracking-wider rounded-md;
    @apply transition-all duration-300;
    @apply hover:shadow-gold-glow hover:-translate-y-0.5 active:scale-95;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none;
    min-height: 44px;
    touch-action: manipulation;
  }
  
  /* Secondary action button */
  .btn-hologram {
    @apply px-6 py-3 border-2 border-hologram-cyan text-hologram-cyan font-mono uppercase tracking-wider rounded-md;
    @apply transition-all duration-300;
    @apply hover:bg-hologram-cyan hover:text-obsidian hover:shadow-cyan-glow active:scale-95;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    min-height: 44px;
    touch-action: manipulation;
  }
  
  /* Clock in button (green) */
  .btn-clock-in {
    @apply px-8 py-4 bg-status-active text-obsidian font-mono uppercase tracking-wider rounded-lg;
    @apply transition-all duration-300 text-lg font-bold;
    @apply hover:shadow-green-glow hover:-translate-y-1 active:scale-95;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    min-height: 56px;
  }
  
  /* Clock out button (red) */
  .btn-clock-out {
    @apply px-8 py-4 bg-status-offline text-white font-mono uppercase tracking-wider rounded-lg;
    @apply transition-all duration-300 text-lg font-bold;
    @apply hover:shadow-[0_0_15px_rgba(239,68,68,0.6)] hover:-translate-y-1 active:scale-95;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    min-height: 56px;
  }
  
  /* Break button (amber) */
  .btn-break {
    @apply px-6 py-3 bg-status-break text-obsidian font-mono uppercase tracking-wider rounded-md;
    @apply transition-all duration-300;
    @apply hover:shadow-amber-glow hover:-translate-y-0.5 active:scale-95;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    min-height: 44px;
  }
  
  /* Card component */
  .card {
    @apply bg-slate/50 backdrop-blur-sm border border-baked-clay/30 rounded-lg p-6;
    @apply transition-all duration-300;
  }
  
  .card-hover {
    @apply hover:border-relic-gold/50 hover:shadow-[0_4px_20px_rgba(204,164,59,0.15)];
  }
  
  /* Input styling */
  .input-field {
    @apply w-full px-4 py-3 bg-obsidian border-2 border-baked-clay/50 rounded-md;
    @apply text-sand placeholder:text-text-slate/50;
    @apply focus:outline-none focus:border-relic-gold focus:shadow-[0_0_10px_rgba(204,164,59,0.3)];
    @apply transition-all duration-300;
  }
  
  /* Terminal text effect */
  .terminal-text {
    @apply font-mono text-sm text-hologram-cyan;
    text-shadow: 0 0 5px rgba(0, 240, 255, 0.5);
  }
  
  /* Status indicator */
  .status-dot {
    @apply w-3 h-3 rounded-full;
  }
  
  .status-dot-active {
    @apply bg-status-active shadow-green-glow animate-pulse;
  }
  
  .status-dot-break {
    @apply bg-status-break shadow-amber-glow animate-pulse;
  }
  
  .status-dot-offline {
    @apply bg-status-offline;
  }
  
  /* Time display */
  .time-display {
    @apply font-mono text-4xl md:text-6xl text-relic-gold;
    text-shadow: 0 0 20px rgba(204, 164, 59, 0.4);
  }
  
  /* Sidebar nav */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-md text-text-slate;
    @apply transition-all duration-200;
    @apply hover:bg-slate hover:text-sand;
  }
  
  .nav-item-active {
    @apply bg-relic-gold/10 text-relic-gold border-l-2 border-relic-gold;
  }
}

@layer utilities {
  .bg-grid-overlay {
    background-image: 
      linear-gradient(90deg, rgba(159,95,63,0.1) 1px, transparent 1px),
      linear-gradient(rgba(159,95,63,0.1) 1px, transparent 1px);
    background-size: 40px 40px;
  }
  
  .text-glow-gold {
    text-shadow: 0 0 10px rgba(204, 164, 59, 0.6);
  }
  
  .text-glow-cyan {
    text-shadow: 0 0 10px rgba(0, 240, 255, 0.6);
  }
  
  /* XP notification animation */
  .animate-slide-up {
    animation: slideUp 0.3s ease-out forwards;
  }
  
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Gamification level-up animation */
  .animate-level-up {
    animation: levelUp 0.5s ease-out forwards;
  }
  
  @keyframes levelUp {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
    }
  }
  
  /* PWA animations */
  .animate-bounce-in {
    animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }
  
  @keyframes bounceIn {
    0% {
      opacity: 0;
      transform: translateX(-50%) scale(0.5);
    }
    100% {
      opacity: 1;
      transform: translateX(-50%) scale(1);
    }
  }
  
  /* Safe area padding for notched devices */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  
  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  /* Pull to refresh indicator */
  .animate-spin-slow {
    animation: spin 1.5s linear infinite;
  }
  
  /* Swipe action reveal */
  .swipe-reveal-left {
    animation: revealLeft 0.2s ease-out forwards;
  }
  
  @keyframes revealLeft {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-80px);
    }
  }
  
  .swipe-reveal-right {
    animation: revealRight 0.2s ease-out forwards;
  }
  
  @keyframes revealRight {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(80px);
    }
  }
  
  /* Offline indicator pulse */
  .animate-offline-pulse {
    animation: offlinePulse 2s ease-in-out infinite;
  }
  
  @keyframes offlinePulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
}
